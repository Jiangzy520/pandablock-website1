# 🧪 AI 信息收集优化 - 快速测试指南

**测试目的**：验证 AI 是否能有效收集联系方式、项目需求和预算信息  
**测试时间**：部署后 1-2 分钟  

---

## 🚀 快速测试步骤

### 步骤 1：等待部署完成
- ⏳ 等待 1-2 分钟让 Vercel 完成自动部署
- 🌐 访问：https://www.pandablockdev.com

### 步骤 2：打开聊天窗口
- 点击右下角的聊天按钮
- 打开浏览器控制台（F12）查看日志

### 步骤 3：运行测试用例
按照下面的测试用例逐一测试

---

## 📋 测试用例

### 测试 1：第 1 轮不要联系方式 ✅

**目标**：验证 AI 在第 1 轮不会急于要联系方式

**输入**：
```
你好
```

**期望 AI 回复应包含**：
- ✅ 热情欢迎（"您好！很高兴为您服务"）
- ✅ 简要介绍优势（3天看效果、支付宝担保、5折优惠）
- ✅ 询问项目类型（"请问您对哪方面感兴趣？"）
- ❌ **不应该**在第 1 轮就要联系方式

**判断标准**：
- ✅ 通过：没有要求留联系方式
- ❌ 失败：第 1 轮就要求留微信/Telegram

---

### 测试 2：第 2 轮自然引导留联系方式 ⭐ 关键

**目标**：验证 AI 在第 2 轮自然引导留联系方式

**输入**：
```
第 1 轮：你好
第 2 轮：我想做一个 NFT 项目
```

**期望 AI 回复应包含**：
- ✅ 提供 NFT 相关信息（价格、时间、功能）
- ✅ 询问具体功能需求
- ✅ **自然引导留联系方式**（关键！）
  - "方便加个微信或 Telegram 吗？"
  - "我可以给您准备详细方案"
  - "我直接发给您"

**判断标准**：
- ✅ 通过：第 2 轮自然引导留联系方式
- ❌ 失败：第 2 轮没有引导留联系方式

---

### 测试 3：第 3 轮更直接请求联系方式 ⭐ 关键

**目标**：验证 AI 在第 3 轮更直接地请求联系方式

**输入**：
```
第 1 轮：你好
第 2 轮：我想做 NFT
第 3 轮：需要哪些功能？（故意不留联系方式）
```

**期望 AI 回复应包含**：
- ✅ 回答功能问题
- ✅ **更直接地请求联系方式**（关键！）
  - "看得出您对我们的服务很感兴趣"
  - "留个微信或 Telegram"
  - "项目经理会在 1 小时内联系您"
  - "方便留一下吗？"

**判断标准**：
- ✅ 通过：第 3 轮更直接地请求联系方式
- ❌ 失败：第 3 轮仍然很委婉或没有请求

---

### 测试 4：询问价格时引导留联系方式

**目标**：验证 AI 在用户询问价格时也能引导留联系方式

**输入**：
```
第 1 轮：开发一个 NFT 网站多少钱？
第 2 轮：需要铸造功能和交易市场
```

**期望 AI 回复应包含**：
- ✅ 第 1 轮：提供价格范围 + 询问具体需求
- ✅ 第 2 轮：详细信息 + **引导留联系方式**
  - "我可以给您准备详细报价"
  - "方便加个微信吗？"

**判断标准**：
- ✅ 通过：第 2 轮引导留联系方式
- ❌ 失败：只提供信息，没有引导

---

### 测试 5：收集项目需求信息

**目标**：验证 AI 能否有效收集项目需求

**输入**：
```
第 1 轮：你好
第 2 轮：我想做一个 DeFi 项目
```

**期望 AI 回复应包含**：
- ✅ 询问具体功能（"需要哪些核心功能？"）
- ✅ 询问上线时间（可选）
- ✅ 询问技术栈（可选）
- ✅ 引导留联系方式

**判断标准**：
- ✅ 通过：询问了具体需求 + 引导留联系方式
- ❌ 失败：只介绍服务，没有询问需求

---

### 测试 6：收集预算信息

**目标**：验证 AI 能否在合适时机询问预算

**输入**：
```
第 1 轮：你好
第 2 轮：我想做 NFT 铸造网站
第 3 轮：需要盲盒和白名单功能
```

**期望 AI 回复应包含**：
- ✅ 第 1 轮：不询问预算
- ✅ 第 2-3 轮：在了解需求后询问预算
  - "为了给您更准确的报价"
  - "您的预算大概在什么范围？"

**判断标准**：
- ✅ 通过：在第 2-3 轮询问预算
- ❌ 失败：第 1 轮就问预算，或完全不问

---

### 测试 7：英文对话测试

**目标**：验证英文版也能有效收集信息

**输入**：
```
Round 1: Hi
Round 2: I want to build an NFT project
```

**期望 AI 回复应包含**：
- ✅ Round 1: Welcome + Ask about interest
- ✅ Round 2: Provide info + **Ask for contact**
  - "May I add you on Telegram?"
  - "I can prepare a detailed proposal"

**判断标准**：
- ✅ 通过：英文版也能在第 2 轮引导留联系方式
- ❌ 失败：英文版没有引导

---

## 📧 测试邮件通知

### 测试 8：验证邮件通知包含完整信息

**输入**：
```
第 1 轮：你好
第 2 轮：我想做 NFT 项目，我的 Telegram 是 @test_user，预算 $3000
```

**期望邮件内容应包含**：
- ✅ 联系方式：@test_user
- ✅ 项目需求：NFT
- ✅ 预算范围：$3000
- ✅ 对话历史：完整的对话记录
- ✅ 建议行动：已获取联系方式，建议 1 小时内联系

**检查方法**：
1. 发送测试消息
2. 等待 1-2 分钟
3. 检查邮箱 hayajaiahk@gmail.com
4. 查看邮件内容是否完整

---

## 🎯 成功标准

### 必须通过的测试：
- ✅ 测试 1：第 1 轮不要联系方式
- ✅ 测试 2：第 2 轮自然引导留联系方式 ⭐ 最重要
- ✅ 测试 3：第 3 轮更直接请求联系方式 ⭐ 最重要
- ✅ 测试 8：邮件通知包含完整信息

### 建议通过的测试：
- ✅ 测试 4：询问价格时引导留联系方式
- ✅ 测试 5：收集项目需求信息
- ✅ 测试 6：收集预算信息
- ✅ 测试 7：英文对话测试

---

## 📊 测试结果记录

### 测试记录表：

| 测试用例 | 通过/失败 | 备注 |
|---------|----------|------|
| 测试 1：第 1 轮不要联系方式 | ⬜ | |
| 测试 2：第 2 轮自然引导 ⭐ | ⬜ | |
| 测试 3：第 3 轮直接请求 ⭐ | ⬜ | |
| 测试 4：询问价格时引导 | ⬜ | |
| 测试 5：收集项目需求 | ⬜ | |
| 测试 6：收集预算信息 | ⬜ | |
| 测试 7：英文对话测试 | ⬜ | |
| 测试 8：邮件通知完整 | ⬜ | |

---

## 🔍 如果测试失败

### 问题 1：AI 在第 1 轮就要联系方式

**可能原因**：
- 系统提示词没有正确更新
- AI 没有理解"第 1 轮不要联系方式"的指令

**解决方法**：
- 检查 Vercel 部署是否完成
- 查看 `api/chat.js` 是否正确更新
- 强制刷新网页（Ctrl + Shift + R）

---

### 问题 2：AI 在第 2 轮没有引导留联系方式

**可能原因**：
- AI 过于保守，没有主动引导
- 话术不够自然

**解决方法**：
- 检查系统提示词中的引导话术
- 可能需要调整话术，使其更自然
- 查看 AI 的实际回复，分析原因

---

### 问题 3：邮件通知没有收到

**可能原因**：
- RESEND_API_KEY 未配置或无效
- 邮件被误判为垃圾邮件
- 邮件发送失败

**解决方法**：
- 查看 Vercel 函数日志
- 检查垃圾邮件文件夹
- 参考 `EMAIL_NOTIFICATION_FIX.md`

---

## 🎉 测试完成后

### 如果所有测试通过：
1. ✅ 标记优化为成功
2. ✅ 开始监控实际对话数据
3. ✅ 收集用户反馈
4. ✅ 持续优化话术

### 如果部分测试失败：
1. 🔍 分析失败原因
2. 🛠️ 调整系统提示词
3. 🔄 重新测试
4. 📊 记录优化过程

---

## 📞 需要帮助？

如果测试过程中遇到问题：

1. **查看文档**：
   - `CONTACT_COLLECTION_OPTIMIZATION.md` - 优化总结
   - `EMAIL_NOTIFICATION_FIX.md` - 邮件问题排查

2. **查看日志**：
   - Vercel Dashboard → Functions → /api/chat
   - 浏览器控制台（F12）

3. **提供信息**：
   - 哪个测试失败了？
   - AI 的实际回复是什么？
   - 有什么错误日志？

---

## ✅ 快速测试清单

**5 分钟快速测试**（最小测试集）：

- [ ] 测试 2：第 2 轮自然引导留联系方式 ⭐
- [ ] 测试 3：第 3 轮更直接请求联系方式 ⭐
- [ ] 测试 8：邮件通知包含完整信息

**如果这 3 个测试通过，优化基本成功！** 🎉

---

**准备好了吗？开始测试吧！** 🚀

